좋은 질문이에요. **이제는 모드 없이 하나의 LLM이 SQL·RAG·설명형을 스스로 조합**하므로, 예전보다 아래 같은 질의가 바로 됩니다.

---

## 1) 시계열·집계(SQL 자동생성 + 표/그래프)

* “**지난 7일 mpt 일별 최대/평균** 보여줘.”
* “**7월 11일 09:00–12:00** 구간의 mpt **추세와 피크 시각** 알려줘.”
* “세션별 **mpt 평균 상위 3개**와 각 **row\_count**도 같이.”

> 업로드 시 생성되는 `v_daily_temp`, `session_summary`를 활용해 날짜·세션 기준 집계가 안정적으로 됩니다.

## 2) 이상치/이벤트 질의(메타 테이블 events)

* “**HIGH\_SPIKE** 이벤트가 **가장 많았던 세션**과 건수는?”
* “**mpt** 기준 **임계치 초과 상위 10건** 시각과 값 보여줘.”
* “7월에 **severity 2 이상 이벤트**가 몰린 구간이 언제야?”

## 3) 세션 요약 탐색(메타 테이블 session\_summary)

* “**row\_count ≥ 10000**이면서 **mpt\_avg > 750**인 세션 나열.”
* “세션별 **mpt\_max**와 **mpw\_avg**를 표로, 상위 5개만.”

## 4) 상관·품질 분석(하이브리드: SQL + 설명)

* “**mpt vs mpw 상관관계**와 **이상치 구간 근거**를 요약해줘.”
* “7월 초 **mpt 상승 원인 후보**와 **추가 확인할 항목** 제안해줘.”

> 채팅창에는 **최종 답변만** 간단히, 오른쪽 **근거 탭**에는 사용 SQL/표 개요/관련 문서 첫 줄/“추가 확인 항목”이 따로 정리됩니다.

## 5) 파일 메타 검색(RAG)

* “어떤 CSV에 **mpt** 컬럼이 있어? 각 컬럼 **null 비율** 요약해줘.”
* “**load** 컬럼이 있는 파일과 기본 통계 알려줘.”

## 6) 자유 대화(톤 선택)

* “이번 결과를 **한 문단으로 요약**해줘.”
* “그래프 해석 포인트 **3가지**만.”

---

### 왜 가능해졌나?

* 업로드 시 **session\_summary/events 뽑기**(+ 인덱스/뷰) → SQL 질문 정답률·속도↑
* **SQL 체인에 스키마 힌트 주입 + 가드레일** → 안전하고 일관된 SQL 생성
* **RAG와 SQL 통합 실행** → 수치 결과 + 설명/가설을 한 번에
* **채팅 최신 하단 고정 + 근거 탭 분리** → 읽기 흐름·감사 추적 용이

원하시면, 여러분 데이터 컬럼명(예: `ts, mpt, mpw, load…`)에 맞춘 **샘플 프롬프트 10개**를 바로 뽑아드릴게요.
